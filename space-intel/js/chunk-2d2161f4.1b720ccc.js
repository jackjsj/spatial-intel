(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2161f4"],{c0b3:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("van-cell-group",[n("van-cell",{attrs:{title:"设备信息"}}),e._l(e.deviceInfoField,(function(t){return n("van-cell",{key:t.key,attrs:{title:t.name,label:t.formatter?t.formatter(e.deviceInfo[t.key]):e.deviceInfo[t.key]}})})),n("van-cell",{attrs:{title:"设备状态",label:e.status}})],2)],1),n("div",{staticClass:"mat mt20 flex jcc"},[n("div",{staticClass:"mr10"},[n("van-button",{attrs:{size:"small"},on:{click:e.on}},[e._v("开启设备")])],1),n("div",[n("van-button",{attrs:{size:"small"},on:{click:e.off}},[e._v("关闭设备")])],1)])])},i=[],r=(n("d78f"),n("36e7"),n("4cbc"),n("b3df")),c=(n("63ff"),n("365c"));function s(){return Math.round((new Date).getTime()/1e3)}var o=[{name:"名称",key:"name"},{name:"ip",key:"ip"},{name:"在线状态",key:"online",formatter:function(e){return e?"在线":"离线"}},{name:"设备ID",key:"deviceid"},{name:"设备类型",key:"type"},{name:"设备apikey",key:"apikey"}],u={data:function(){return{deviceInfoField:o,deviceInfo:{},status:""}},mounted:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.login());case 2:return this.loginInfo=e.sent,e.next=5,regeneratorRuntime.awrap(this.getDeviceById());case 5:return this.deviceInfo=e.sent,e.next=8,regeneratorRuntime.awrap(this.getDeviceStatus());case 8:this.deviceStatus=e.sent;case 9:case"end":return e.stop()}}),null,this)},methods:{getDeviceStatus:function(){var e=this;Object(c["c"])({deviceid:"1000b06c5f",appid:"Jz40dL2jj4GCaqorkleliPvgT2wDyInZ",ts:s()},this.loginInfo.at).then((function(t){e.status="off"===t.params.switch?"已关闭":"已开启"}))},getDeviceById:function(){return r["a"].loading({message:"正在查询设备信息...",forbidClick:!0,loadingType:"spinner",duration:0}),Object(c["b"])({deviceid:"1000b06c5f",appid:"Jz40dL2jj4GCaqorkleliPvgT2wDyInZ",ts:s()},this.loginInfo.at).then((function(e){return r["a"].clear(),e}))},login:function(){return r["a"].loading({message:"登录中...",forbidClick:!0,loadingType:"spinner",duration:0}),Object(c["d"])({password:"book1548",phoneNumber:"+8613730995961",appid:"Jz40dL2jj4GCaqorkleliPvgT2wDyInZ",ts:s()}).then((function(e){return r["a"].clear(),Object(r["a"])("登录成功"),e}))},on:function(){var e=this;Object(c["e"])({deviceid:"1000b06c5f",appid:"Jz40dL2jj4GCaqorkleliPvgT2wDyInZ",ts:s(),apikey:this.deviceInfo.apikey,params:{switch:"on"}},this.loginInfo.at).then((function(t){return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(0===t.error){n.next=4;break}Object(r["a"])(t.errmsg),n.next=7;break;case 4:return n.next=6,regeneratorRuntime.awrap(e.getDeviceStatus());case 6:Object(r["a"])("设备".concat(t.deviceid,"已开启"));case 7:console.log(t);case 8:case"end":return n.stop()}}))}))},off:function(){var e=this;Object(c["e"])({deviceid:"1000b06c5f",appid:"Jz40dL2jj4GCaqorkleliPvgT2wDyInZ",ts:s(),apikey:this.deviceInfo.apikey,params:{switch:"off"}},this.loginInfo.at).then((function(t){return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(0===t.error){n.next=4;break}Object(r["a"])(t.errmsg),n.next=7;break;case 4:return n.next=6,regeneratorRuntime.awrap(e.getDeviceStatus());case 6:Object(r["a"])("设备".concat(t.deviceid,"已关闭"));case 7:console.log(t);case 8:case"end":return n.stop()}}))}))}}},l=u,d=n("4e82"),f=Object(d["a"])(l,a,i,!1,null,"4f727e4d",null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d2161f4.1b720ccc.js.map